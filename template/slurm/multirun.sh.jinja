#!/bin/bash
#SBATCH --job-name {{ project_name }}-train-multirun
#SBATCH --output logs/out/%j.txt
#SBATCH --error logs/err/%j.txt
#SBATCH --mail-user {{ author_email }}
#SBATCH --mail-type ALL
#SBATCH --time 2-20:00:00
#SBATCH --ntasks-per-node 1
#SBATCH --partition allgroups
#SBATCH --mem 2G

srun ~/.local/bin/uv run train --multirun \
    data.latent_dim=2,3,4,8 \
    optim.lr=0.01,0.001,0.0001 \
    train.batch_size=32,64,128 \
    train.epochs=10,20,30 \
    hydra.launcher.timeout_min=3 \
    hydra.launcher.partition=allgroups \
    hydra.launcher.gres=gpu:a40 \
    hydra.launcher.tasks_per_node=2 \
    hydra.launcher.mem_gb=10G
